/var/log/qoder-resume/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 root root
    postrotate
        # Signal application to reopen log files if needed
        # pkill -USR1 node || true
    endscript
}

/var/log/qoder-resume/performance.log {
    hourly
    missingok
    rotate 168
    compress
    delaycompress
    notifempty
    create 0644 root root
}

/var/log/qoder-resume/error.log {
    daily
    missingok
    rotate 90
    compress
    delaycompress
    notifempty
    create 0644 root root
    postrotate
        # Alert on error log rotation if it's large
        size=$(stat -c%s /var/log/qoder-resume/error.log.1.gz 2>/dev/null || echo 0)
        if [ $size -gt 10485760 ]; then
            echo "Large error log detected: $size bytes" | logger -t qoder-resume-logrotate
        fi
    endscript
}